<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>GGPF Test</title>
	<meta name="viewport" content="width=device-width,user-scalable=no,minimum-scale=1.0,maximum-scale=1.0" />
	<meta name="description" content="testing">
	<meta name="version" content="Version 2025-06-06">
	<style>
		body {
			font: 100% monospace;
		}

		nav {
			background-color: #eff;
			border: 1px solid #ccc;
			border-radius: 0.5rem;
			margin: 0.5rem;
			/* padding: 0.5rem; */
			width: 20rem;
		}

		#divContent {
			border: 1px solid #ccc;
			height: 500px;
			position: absolute;
			width: 100%
		}

		#ifr {
			border: 5px solid #fcc;
			height: 100%;
			overflow: hidden;
			width: 100%;
		}

		#divMainContent {
			height: 70vh;
		}
	</style>
</head>

<body>
	<script src="../../config.js"></script>
	<script src="../main.js"></script>
	<nav>

		<h1>
			<a id=aGitHubSource href="https://github.com/pushme-pullyou/tootoo-2025/tree/main/tootoo" target="_blank"
				title="source code on GitHub"><img src=https://pushme-pullyou.github.io/assets/svg/mark-github.svg></a>
			<a href="" title="Click this menu title to reset the model">
				<span id=spnTitle></span>
				<span id=spnVersion></span>
			</a>
		</h1>

		<div>
			<button onclick=test1()>notesy readme</button>
			<button onclick=test2()>test</button>
			<button onclick=test3()>text-to-hack</button>
			<button onclick=test4()>file-names</button>

			<button onclick=location.hash="">clear hash</button>
			<button onclick=delSha()>delSha</button>
		</div>

	</nav>

	<main id=main>

		<div id="divMessage">2025-06-07</div>
		<div id="divMainContent"></div>

	</main>
	<script>

		init();

		function init() {

			//document.title = COR.menuTitle;
			spnTitle.innerText = COR.menuTitle;
			aGitHubSource.href = COR.urlSource;
			aGitHubSource.title = document.querySelector("[ name=version ]").content;

			divMainContent.innerHTML = `<iframe id=ifr src="github-get-put-file.html"></iframe>`;

			ifr.onload = () => ifr.contentWindow.init(COR.urlBaseAPI + COR.defaultFileEdit);
			//ifr.onLoad = () => { ifr.contentWindow.init() };
			
			window.addEventListener("hashchange", onHashChange, false);

			location.hash = location.hash ? location.hash : COR.defaultFileEdit;

			//onHashChange();

		}

		test1 = () => location.hash = "@@README.md";
		test2 = () => location.hash = "@@test.md";
		test3 = () => location.hash = "@@text-to-hack.md";
		test4 = () => location.hash = "@@test-cases/file-names.txt";

		delSha = () => localStorage.setItem("githubAccessToken", "");


		function onHashChange() {

			ifr.contentWindow.location.hash = COR.urlBaseAPI + location.hash.slice(1);
			//console.log("hash", ifr.contentWindow.location.hash.slice(1));

		}

	</script>

</body>

</html>